{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/go/frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/ubuntu/go/frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ubuntu/go/frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ubuntu/go/frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Modal}from'react-bootstrap';import{useState,useEffect}from'react';import{getUpdatePass}from'../api/getUpdatePassword';import{Route,useHistory}from'react-router';import{SuccessChange}from'./SuccessChange';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ChangePass=function ChangePass(){var history=useHistory();var _useState=useState({username:localStorage.getItem(\"username\"),email:localStorage.getItem(\"email\"),password:\"\",newPassword:\"\"}),_useState2=_slicedToArray(_useState,2),userRequest=_useState2[0],setUserRequest=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isInvalid=_useState4[0],setIsInvalid=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isFilled=_useState10[0],setIsFilled=_useState10[1];var handleFilled=function handleFilled(userRequest){if(!userRequest.password==\"\"&&!userRequest.newPassword==\"\"){setIsFilled(true);}else if(userRequest.password===\"\"||userRequest.newPassword===\"\"){setIsFilled(false);}};var handleChangePass=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getUpdatePass(userRequest);case 2:data=_context.sent;if(data==null){setIsInvalid(true);setMessage(\"Your password is incorrect\");}else if(data.message===\"\"){setIsInvalid(true);setMessage(\"Your password is incorrect\");}else if(data.message===\"SUCCESS_CHANGE_PASSWORD\"){setIsInvalid(false);setShow(false);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleChangePass(){return _ref.apply(this,arguments);};}();useEffect(function(){return handleFilled(userRequest);},[userRequest]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"default\",onClick:handleShow,children:\"Change password\"}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:/*#__PURE__*/_jsx(\"p\",{class:\"h3 text-danger\",children:\"Change password\"})})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"flex flex-column mx-auto bg-white p-3\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"alert alert-danger my-2 \".concat(isInvalid?\"\":\"d-none\"),role:\"alert\",children:message}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label text-secondary\",htmlFor:\"password\",children:\"Current password\"}),/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",onChange:function onChange(e){return setUserRequest(_objectSpread(_objectSpread({},userRequest),{},{password:e.target.value}));},type:\"password\",value:userRequest.password,id:\"password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-column mt-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label text-secondary\",htmlFor:\"password\",children:\"New password\"}),/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",onChange:function onChange(e){return setUserRequest(_objectSpread(_objectSpread({},userRequest),{},{newPassword:e.target.value}));},type:\"password\",value:userRequest.newPassword,id:\"newPassword\"})]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Cancel\"}),isFilled?/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:function onClick(){return handleChangePass();},children:\"Change password\"}):/*#__PURE__*/_jsx(Button,{variant:\"danger\",disabled:true,children:\"Change password\"})]})]})]});};export default ChangePass;","map":{"version":3,"sources":["/home/ubuntu/go/frontend/frontend/src/components/ChangePassword.js"],"names":["Button","Modal","useState","useEffect","getUpdatePass","Route","useHistory","SuccessChange","Link","ChangePass","history","username","localStorage","getItem","email","password","newPassword","userRequest","setUserRequest","isInvalid","setIsInvalid","show","setShow","handleClose","handleShow","message","setMessage","isFilled","setIsFilled","handleFilled","handleChangePass","data","e","target","value"],"mappings":"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","sourcesContent":["import { Button, Modal } from 'react-bootstrap';\nimport { useState, useEffect } from 'react';\nimport { getUpdatePass } from '../api/getUpdatePassword';\nimport { Route, useHistory } from 'react-router';\nimport { SuccessChange } from './SuccessChange';\nimport { Link } from 'react-router-dom';\n\n\nconst ChangePass = () => {\n    let history = useHistory();\n\n    const [userRequest, setUserRequest] = useState({\n        username: localStorage.getItem(\"username\"),\n        email: localStorage.getItem(\"email\"),\n        password: \"\",\n        newPassword: \"\"\n    })\n\n    const [isInvalid, setIsInvalid] = useState(false);\n\n    const [show, setShow] = useState(false);\n\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n\n    const [message, setMessage] = useState(\"\");\n\n    const [isFilled, setIsFilled] = useState(false);\n\n    const handleFilled = (userRequest) => {\n        if (!userRequest.password == \"\" && !userRequest.newPassword == \"\") {\n            setIsFilled(true);\n        } else if (userRequest.password === \"\" || userRequest.newPassword === \"\") {\n            setIsFilled(false);\n        }\n    }\n\n    const handleChangePass = async () => {\n        let data = await getUpdatePass(userRequest);\n        if (data == null) {\n            setIsInvalid(true)\n            setMessage(\"Your password is incorrect\")\n        }else if (data.message ===\"\"){\n            setIsInvalid(true)\n            setMessage(\"Your password is incorrect\")\n        }\n         else if (data.message === \"SUCCESS_CHANGE_PASSWORD\") {\n            setIsInvalid(false);\n            setShow(false);\n        }\n\n    }\n\n    useEffect(() => handleFilled(userRequest),[userRequest]);\n\n    return (\n        <>\n            <Button variant=\"default\" onClick={handleShow}>\n                Change password\n            </Button>\n\n            <Modal show={show} onHide={handleClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title><p class=\"h3 text-danger\">Change password</p></Modal.Title>\n                </Modal.Header>\n\n                <Modal.Body>\n                    <form className=\"flex flex-column mx-auto bg-white p-3\">\n                        <div\n                            class={`alert alert-danger my-2 ${isInvalid ? \"\" : \"d-none\"}`}\n                            role=\"alert\"\n                        >\n                            {message}\n                            { }\n                        </div>\n                        <div>\n                            <label className=\"form-label text-secondary\" htmlFor=\"password\">\n                                Current password\n                            </label>\n                            <input\n                                class=\"form-control\"\n                                onChange={(e) => setUserRequest({ ...userRequest, password: e.target.value })}\n                                type=\"password\"\n                                value={userRequest.password}\n                                id=\"password\"\n                            />\n\n                        </div>\n                        <div className=\"flex flex-column mt-2\">\n                            <label className=\"form-label text-secondary\" htmlFor=\"password\">\n                                New password\n                            </label>\n                            <input\n                                class=\"form-control\"\n                                onChange={(e) => setUserRequest({ ...userRequest, newPassword: e.target.value })}\n                                type=\"password\"\n                                value={userRequest.newPassword}\n                                id=\"newPassword\"\n                            />\n                        </div>\n\n\n                    </form>\n\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={handleClose}>\n                        Cancel\n                    </Button>\n                    {isFilled ? (\n                        <Button variant=\"danger\" onClick={() => handleChangePass()}>\n                            Change password\n                        </Button>\n                    ) :\n                        <Button variant=\"danger\" disabled>\n                            Change password\n                        </Button>}\n\n                </Modal.Footer>\n            </Modal>\n        </>\n    );\n}\nexport default ChangePass\n"]},"metadata":{},"sourceType":"module"}