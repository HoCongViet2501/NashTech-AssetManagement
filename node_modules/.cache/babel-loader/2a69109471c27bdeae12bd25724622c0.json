{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/go/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/ubuntu/go/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ubuntu/go/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ubuntu/go/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{getLogin}from\"../../api/getLogin\";import{useHistory}from\"react-router-dom\";import{Alert,Form}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var history=useHistory();var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),info=_useState2[0],setInfo=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFilled=_useState4[0],setIsFilled=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isInvalid=_useState6[0],setIsInvalid=_useState6[1];var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getLogin(info);case 2:data=_context.sent;if(data==null){setIsInvalid(true);}else if(data.message===\"SUCCESS_LOGIN_USER\"){localStorage.setItem(\"jwtToken\",data.data.token);localStorage.setItem(\"username\",data.data.username);localStorage.setItem(\"refreshToken\",data.data.refreshToken);localStorage.setItem(\"email\",data.data.email);setIsInvalid(false);history.push(\"/home\");}case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(){return _ref.apply(this,arguments);};}();var handleInput=function handleInput(info){if(info.username!==\"\"&&info.password!==\"\"){setIsFilled(true);}else if(info.username===\"\"||info.password===\"\"){setIsFilled(false);}};useEffect(function(){handleInput(info);},[info]);return/*#__PURE__*/_jsx(\"div\",{className:\"flex text-start d-grid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-column mx-auto bg-white p-3 col-4 mt-5\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"h3 text-secondary text-center\",children:\"Log in\"}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mt-3\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"form-label text-secondary\",htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){setInfo(_objectSpread(_objectSpread({},info),{},{username:e.target.value}));},type:\"text\",value:info.username,id:\"username\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"flex flex-column mt-2\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"form-label text-secondary\",htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{onChange:function onChange(e){setInfo(_objectSpread(_objectSpread({},info),{},{password:e.target.value}));},type:\"password\",value:info.password,id:\"password\"})]}),/*#__PURE__*/_jsx(Alert,{class:\"alert alert-danger my-2 \".concat(isInvalid?\"\":\"d-none\"),role:\"alert\",children:\"Username or password is incorrect. Please try again\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid mt-3\",children:isFilled?/*#__PURE__*/_jsx(\"button\",{className:\"col-4 offset-4 btn btn-danger\",onClick:function onClick(){return handleLogin();},children:\"Log in\"}):/*#__PURE__*/_jsx(\"button\",{className:\"col-4 offset-4 btn btn-danger\",disabled:true,children:\"Log in\"})})]})});};export default Login;","map":{"version":3,"sources":["/home/ubuntu/go/frontend/src/pages/Login/Login.js"],"names":["axios","useEffect","useState","Link","getLogin","useHistory","Alert","Form","Login","history","username","password","info","setInfo","isFilled","setIsFilled","isInvalid","setIsInvalid","handleLogin","data","message","localStorage","setItem","token","refreshToken","email","push","handleInput","e","target","value"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { getLogin } from \"../../api/getLogin\";\nimport { useHistory } from \"react-router-dom\";\nimport { Alert, Form } from \"react-bootstrap\";\nconst Login = () => {\n\tlet history = useHistory();\n\tconst [info, setInfo] = useState({\n\t\tusername: \"\",\n\t\tpassword: \"\"\n\t});\n\tconst [isFilled, setIsFilled] = useState(false);\n\tconst [isInvalid, setIsInvalid] = useState(false);\n\n\tconst handleLogin = async () => {\n\t\tlet data = await getLogin(info);\n\t\tif (data == null) {\n\t\t\tsetIsInvalid(true);\n\t\t} else if (data.message === \"SUCCESS_LOGIN_USER\") {\n\t\t\tlocalStorage.setItem(\"jwtToken\", data.data.token);\n\t\t\tlocalStorage.setItem(\"username\", data.data.username);\n\t\t\tlocalStorage.setItem(\"refreshToken\", data.data.refreshToken);\n\t\t\tlocalStorage.setItem(\"email\", data.data.email);\n\t\t\tsetIsInvalid(false);\n\t\t\thistory.push(\"/home\");\n\t\t}\n\t};\n\n\tconst handleInput = (info) => {\n\t\tif (info.username !== \"\" && info.password !== \"\") {\n\t\t\tsetIsFilled(true);\n\t\t} else if (info.username === \"\" || info.password === \"\") {\n\t\t\tsetIsFilled(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\thandleInput(info);\n\t}, [info]);\n\n\treturn (\n\t\t<div className=\"flex text-start d-grid\">\n\t\t\t<div className=\"flex flex-column mx-auto bg-white p-3 col-4 mt-5\">\n\t\t\t\t<p class=\"h3 text-secondary text-center\">Log in</p>\n\t\t\t\t<Form.Group className=\"mt-3\">\n\t\t\t\t\t<Form.Label className=\"form-label text-secondary\" htmlFor=\"username\">\n\t\t\t\t\t\tUsername\n\t\t\t\t\t</Form.Label>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetInfo({ ...info, username: e.target.value });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={info.username}\n\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t\t<Form.Group className=\"flex flex-column mt-2\">\n\t\t\t\t\t<Form.Label className=\"form-label text-secondary\" htmlFor=\"password\">\n\t\t\t\t\t\tPassword\n\t\t\t\t\t</Form.Label>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetInfo({ ...info, password: e.target.value });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tvalue={info.password}\n\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t\t<Alert\n\t\t\t\t\tclass={`alert alert-danger my-2 ${isInvalid ? \"\" : \"d-none\"}`}\n\t\t\t\t\trole=\"alert\"\n\t\t\t\t>\n\t\t\t\t\tUsername or password is incorrect. Please try again\n\t\t\t\t</Alert>\n\t\t\t\t<div className=\"d-grid mt-3\">\n\t\t\t\t\t{isFilled ? (\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"col-4 offset-4 btn btn-danger\"\n\t\t\t\t\t\t\tonClick={() => handleLogin()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLog in\n\t\t\t\t\t\t</button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<button className=\"col-4 offset-4 btn btn-danger\" disabled>\n\t\t\t\t\t\t\tLog in\n\t\t\t\t\t\t</button>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}